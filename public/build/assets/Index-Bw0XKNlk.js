import{r as o,j as e,Q as H}from"./app-CLY3Rrsu.js";import{B as g}from"./button-BS65-JNH.js";import{C as c,b as x,c as h,a as i,d as z}from"./card-CLMnVb_u.js";import{B as u}from"./badge-omXVK4Z0.js";import{A as Q,D as $,a as K,b as U,c as w}from"./app-layout-CLKGMt5g.js";import{R as b,A as G}from"./RecurringTransactionForm-C5VtT2-b.js";import J from"./DeleteRecurringTransactionModal-CA4dx0RX.js";import{P as D}from"./plus-Bxp0Q8-E.js";import{c as _}from"./utils-DLMB8ej9.js";import{A as v,a as M}from"./arrow-up-Rh-3TcdK.js";import{S as V,T as W}from"./trash-2-BGL7fd_V.js";/* empty css            */import"./index-Dl-p3A7B.js";import"./index-CkQKxasq.js";import"./index-RHbgXbNC.js";import"./index-BI4hpgF1.js";import"./index-EtylZ2DR.js";import"./index-3vY6ka8c.js";import"./index-BiGSQT-I.js";import"./index-DnEUT2vJ.js";import"./index-BeNNEyM1.js";import"./tag-wQZAlf1a.js";import"./dialog-lUksT3GM.js";import"./select-pyEKviHf.js";import"./index-NO9EGY2D.js";import"./input-CoVvPQ80.js";import"./label-Be86QqRv.js";import"./date-input-BcD5Mnt0.js";import"./calendar-B-w3oEFs.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],T=_("CalendarDays",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ee=_("Ellipsis",Z);function Se({recurringTransactions:n,accounts:j,categories:N}){const[C,m]=o.useState(!1),[S,p]=o.useState(!1),[B,y]=o.useState(!1),[d,l]=o.useState(null),E=()=>{m(!1),l(null)},q=()=>{p(!1),l(null)},A=()=>{y(!1),l(null)},I=s=>{l(s),p(!0)},F=s=>{l(s),y(!0)},f=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(parseInt(s)),O=s=>({daily:"Harian",weekly:"Mingguan",monthly:"Bulanan",yearly:"Tahunan"})[s]||s,k=s=>new Date(s).toLocaleDateString("id-ID"),R=s=>{switch(s){case"income":return e.jsx(v,{className:"h-4 w-4 text-green-600"});case"expense":return e.jsx(M,{className:"h-4 w-4 text-red-600"});case"transfer":return e.jsx(G,{className:"h-4 w-4 text-blue-600"});default:return null}},P=s=>({income:"Pemasukan",expense:"Pengeluaran",transfer:"Transfer"})[s]||s,Y=s=>{const r=new Date(s.start_date),a=new Date;if(s.frequency==="daily"){const t=new Date(a);return t.setDate(a.getDate()+1),t}if(s.frequency==="weekly"){const t=new Date(a);return t.setDate(a.getDate()+(7-a.getDay())),t}if(s.frequency==="monthly"&&s.day_of_month){const t=new Date(a.getFullYear(),a.getMonth(),s.day_of_month);return t<=a&&t.setMonth(t.getMonth()+1),t}if(s.frequency==="yearly"&&s.day_of_month){const t=new Date(a.getFullYear(),r.getMonth(),s.day_of_month);return t<=a&&t.setFullYear(t.getFullYear()+1),t}return null},L=s=>{if(!s)return"Tidak diketahui";const r=new Date,a=Math.ceil((s.getTime()-r.getTime())/(1e3*60*60*24));return a===0?"Hari ini":a===1?"Besok":a<=7?`${a} hari lagi`:s.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:s.getFullYear()!==r.getFullYear()?"numeric":void 0})};return e.jsxs(Q,{children:[e.jsx(H,{title:"Transaksi Berulang"}),e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Transaksi Berulang"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:"Kelola transaksi yang berjalan secara otomatis"})]}),e.jsxs(g,{onClick:()=>m(!0),className:"w-full sm:w-auto",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Transaksi Berulang"}),e.jsx("span",{className:"sm:hidden",children:"Tambah Transaksi"})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Aktif"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Transaksi berulang yang aktif"})]})]}),e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pemasukan Bulanan"}),e.jsx(v,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold break-all",children:f(n.filter(s=>s.type==="income"&&s.frequency==="monthly").reduce((s,r)=>s+parseInt(r.amount),0).toString())}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Estimasi pemasukan bulanan"})]})]}),e.jsxs(c,{className:"sm:col-span-2 lg:col-span-1",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pengeluaran Bulanan"}),e.jsx(M,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold break-all",children:f(n.filter(s=>s.type==="expense"&&s.frequency==="monthly").reduce((s,r)=>s+parseInt(r.amount),0).toString())}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Estimasi pengeluaran bulanan"})]})]})]}),e.jsxs(c,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Daftar Transaksi Berulang"}),e.jsx(z,{children:"Semua transaksi berulang yang telah Anda atur"})]}),e.jsx(i,{children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 text-center",children:[e.jsx(T,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Belum ada transaksi berulang"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 px-4 max-w-md",children:"Mulai dengan menambahkan transaksi berulang pertama Anda"}),e.jsxs(g,{onClick:()=>m(!0),className:"w-full sm:w-auto",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Transaksi Berulang"}),e.jsx("span",{className:"sm:hidden",children:"Tambah Transaksi"})]})]}):e.jsx("div",{className:"space-y-3",children:n.map(s=>{const r=Y(s),a=!s.end_date||new Date(s.end_date)>new Date;return e.jsx(c,{className:"hover:shadow-sm transition-shadow",children:e.jsxs(i,{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[R(s.type),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:P(s.type)}),!a&&e.jsx(u,{variant:"outline",className:"text-xs text-gray-500",children:"Berakhir"})]}),e.jsx("div",{className:"font-bold text-lg sm:text-xl mb-2",style:{color:s.type==="income"?"#16a34a":s.type==="expense"?"#dc2626":"#2563eb"},children:f(s.amount)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.jsxs("div",{className:"truncate",children:[e.jsx("span",{className:"font-medium",children:s.account.name}),s.category&&e.jsxs("span",{className:"text-gray-500",children:[" â€¢ ",s.category.icon&&e.jsx("span",{className:"mr-1",children:s.category.icon}),s.category.name]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[e.jsx(u,{variant:"outline",className:"text-xs",children:O(s.frequency)}),(s.frequency==="monthly"||s.frequency==="yearly")&&s.day_of_month&&e.jsxs(u,{variant:"secondary",className:"text-xs",children:["Tgl ",s.day_of_month]}),a&&r&&e.jsx(u,{variant:"default",className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:L(r)})]}),s.description&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 italic truncate",children:['"',s.description,'"']})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs($,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Buka menu"}),e.jsx(ee,{className:"h-4 w-4"})]})}),e.jsxs(U,{align:"end",children:[e.jsxs(w,{onClick:()=>I(s),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(w,{onClick:()=>F(s),className:"text-red-600",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[k(s.start_date)," - ",s.end_date?k(s.end_date):"Tidak terbatas"]})})]})},s.id)})})})]})]}),e.jsx(b,{open:C,onOpenChange:m,mode:"create",accounts:j,categories:N,onSuccess:E}),d&&e.jsx(b,{open:S,onOpenChange:p,mode:"edit",recurringTransaction:d,accounts:j,categories:N,onSuccess:q}),d&&e.jsx(J,{open:B,onOpenChange:y,recurringTransaction:d,onSuccess:A})]})}export{Se as default};
