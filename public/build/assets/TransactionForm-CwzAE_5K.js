import{x as F,r as P,j as e,S as v}from"./app-1-agsSNh.js";import{B as A}from"./badge-BZ8D9R4M.js";import{B as b}from"./button-D9b8Kvbo.js";import{D as B,T as w}from"./date-input-Cz8B5tBv.js";import{D as K,a as V,b as I,c as E,d as L}from"./dialog-D9r0jBI_.js";import{I as J}from"./input-BPHleIOv.js";import{L as l}from"./label-Dwiz9sxY.js";import{S as u,a as x,b as p,c as h,d as j}from"./select-BmMxJNKL.js";import{a as M,T as R}from"./trending-up-g1QGSOEa.js";import{A as H}from"./arrow-right-left-CKCjE6ak.js";/* empty css            */import"./index-CDP_w0nW.js";import"./index-D-8SR95U.js";import"./utils-CZaHtsnB.js";import"./index-CUijL9Kj.js";import"./index-e8v-7tLZ.js";import"./index-D9FP6tPh.js";import"./index-B3GqOg_n.js";import"./index-DlXP9SoW.js";import"./calendar-CViLdmuM.js";import"./index-BJkxpFYc.js";import"./index-DRI3qMn6.js";import"./index-Bu3kw1v7.js";function ue({open:c,onOpenChange:m,mode:n,transaction:r,accounts:f,categories:T,onSuccess:d}){const{data:a,setData:s,processing:_,errors:i,reset:g}=F({account_id:"",category_id:"",type:"",amount:"",description:"",transaction_date:new Date().toISOString().split("T")[0],destination_account_id:""}),k=[{value:"income",label:"Pemasukan",icon:M,color:"text-green-600"},{value:"expense",label:"Pengeluaran",icon:R,color:"text-red-600"},{value:"transfer",label:"Transfer",icon:H,color:"text-blue-600"}],y=t=>t?T.filter(o=>o.type===t):[],S=t=>{const o=String(t).replace(/\D/g,"");return o?o.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""},D=t=>t.replace(/\./g,""),N=t=>{const o=D(t);s("amount",o)},C=t=>{t.preventDefault(),n==="create"?v.post(route("transactions.store"),a,{preserveState:!1,onSuccess:()=>{m(!1),g(),d==null||d()}}):n==="edit"&&r&&v.put(route("transactions.update",r.id),a,{preserveState:!1,onSuccess:()=>{m(!1),g(),d==null||d()}})};return P.useEffect(()=>{n==="edit"&&r&&c?s({account_id:String(r.account_id),category_id:String(r.category_id||""),type:r.type,amount:String(r.amount),description:r.description||"",transaction_date:r.transaction_date.split("T")[0],destination_account_id:String(r.destination_account_id||"")}):n==="create"&&c&&g()},[n,r,c]),e.jsx(K,{open:c,onOpenChange:m,children:e.jsxs(V,{className:"sm:max-w-md",children:[e.jsxs(I,{children:[e.jsx(E,{children:n==="create"?"Tambah Transaksi Baru":"Edit Transaksi"}),e.jsx(L,{children:n==="create"?"Catat pemasukan, pengeluaran, atau transfer Anda.":"Perbarui informasi transaksi Anda."})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"type",children:"Jenis Transaksi"}),e.jsxs(u,{value:a.type,onValueChange:t=>{s("type",t),s("category_id",""),s("destination_account_id","")},children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Pilih jenis transaksi"})}),e.jsx(h,{children:k.map(t=>e.jsx(j,{value:t.value,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(t.icon,{className:`mr-2 h-4 w-4 ${t.color}`}),t.label]})},t.value))})]}),i.type&&e.jsx("p",{className:"text-sm text-red-600",children:i.type})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"account",children:"Dari Akun"}),e.jsxs(u,{value:a.account_id,onValueChange:t=>s("account_id",t),children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Pilih akun"})}),e.jsx(h,{children:f.map(t=>e.jsx(j,{value:String(t.id),children:t.name},t.id))})]}),i.account_id&&e.jsx("p",{className:"text-sm text-red-600",children:i.account_id})]}),a.type==="transfer"&&e.jsxs("div",{children:[e.jsx(l,{htmlFor:"destination-account",children:"Ke Akun"}),e.jsxs(u,{value:a.destination_account_id,onValueChange:t=>s("destination_account_id",t),children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Pilih akun tujuan"})}),e.jsx(h,{children:f.filter(t=>String(t.id)!==a.account_id).map(t=>e.jsx(j,{value:String(t.id),children:t.name},t.id))})]}),i.destination_account_id&&e.jsx("p",{className:"text-sm text-red-600",children:i.destination_account_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category",children:"Kategori"}),e.jsxs(u,{value:a.category_id,onValueChange:t=>s("category_id",t),disabled:a.type==="transfer"||!a.type,children:[e.jsx(x,{children:e.jsx(p,{placeholder:a.type==="transfer"?"Transfer tidak memerlukan kategori":a.type?"Pilih kategori":"Pilih jenis transaksi terlebih dahulu"})}),e.jsx(h,{children:y(a.type).map(t=>e.jsx(j,{value:String(t.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.icon&&e.jsx("span",{children:t.icon}),t.name,t.user_id!==null&&e.jsx(A,{variant:"outline",className:"text-xs ml-2",children:"Kategori Kustom"})]})},t.id))})]}),i.category_id&&e.jsx("p",{className:"text-sm text-red-600",children:i.category_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"amount",children:"Jumlah"}),e.jsx(J,{id:"amount",type:"text",value:S(a.amount),onChange:t=>N(t.target.value),placeholder:"0"}),i.amount&&e.jsx("p",{className:"text-sm text-red-600",children:i.amount})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"date",children:"Tanggal"}),e.jsx(B,{id:"date",value:a.transaction_date,onChange:t=>s("transaction_date",t)}),i.transaction_date&&e.jsx("p",{className:"text-sm text-red-600",children:i.transaction_date})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Keterangan"}),e.jsx(w,{id:"description",value:a.description,onChange:t=>s("description",t.target.value),placeholder:"Keterangan opsional...",rows:3}),i.description&&e.jsx("p",{className:"text-sm text-red-600",children:i.description})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Batal"}),e.jsx(b,{type:"submit",disabled:_,children:_?n==="create"?"Menambahkan...":"Memperbarui...":n==="create"?"Tambah Transaksi":"Perbarui Transaksi"})]})]})]})})}export{ue as default};
